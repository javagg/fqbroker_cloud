topicprefix = /topic/
main_collective = mcollective
collectives = mcollective
libdir = vendor/mcollective/plugins:vendor/mcollective/origin/msg-common:vendor/mcollective/freequant/msg-common
logfile = log/mcollective-client.log
loglevel = debug
direct_addressing = 1

# Plugins
securityprovider = psk
plugin.psk = unset

<%
require 'uri'
uri = URI.parse ENV["MQ_URL"]
scheme = uri.scheme
if scheme == "activemq"
%>
connector = activemq
plugin.activemq.pool.size = 1
plugin.activemq.pool.1.host = <%= uri.host %>
plugin.activemq.pool.1.port = <%= uri.port %>
plugin.activemq.pool.1.user = <%= uri.user %>
plugin.activemq.pool.1.password = <%= uri.password %>
<% elsif scheme == "rabbitmq" or scheme == "amqp" %>
connector = amqp
plugin.amqp.host = <%= uri.host %>
plugin.amqp.port = <%= uri.port %>
plugin.amqp.user = <%= uri.user %>
plugin.amqp.password = <%= uri.password %>
plugin.amqp.vhost = <%= uri.path %>
<% elsif scheme == "mqtt" %>
<% elsif scheme == "ironmq" %>
<% else %>
<% end %>
